%---
/checkBox {
    /eventProcDict exch def
    /parent exch def
    /label exch def
    /h exch def
    /y exch def
    /x exch def
    /paint {/bd exch def
                bd /x get
                bd /y get
                bd /h get
                bd /label get
                bd /isPressed get
                {(graphicsEngine/basics/primitives/checkBox/paintPressedCheckBox.ps) (r) file run}
                    {(graphicsEngine/basics/primitives/checkBox/paintUnpressedCheckBox.ps) (r) file run}
                ifelse

                bd paintChildren
        } def
        %eventProcs - procedures for each type of events
    /checkboxDict <</label label /x x /y y /w h /h h /parent parent /children []
                        /inFocus false
                        /paint /paint load
                        /eventProcs eventProcDict
                        /isPressed false
                        /checkBelonging
                            {
                                /element exch def
                                /evY exch def
                                /evX exch def

                                /x element /x get def
                                /y element /y get def
                                /h element /h get def

                                evX x ge evY y ge and
                                x h add evX ge y h add evY ge and
                                and
                            }

    >> def



    checkboxDict addElement

    %element - event, действие забирает один элемент со стека - графический элемент. В момент вызова процедуры в checkElement event.ps кладем checkboxDict
    checkboxDict /eventProcs get /RELEASE {dup /isPressed get /isPressed exch not put repaintAll} addListToDict
    %checkboxDict /eventProcs get /PRESS { dup /isPressed get /isPressed exch not put repaintAll} addListToDict

     parent /children
            parent /children get
            checkBoxDict /number get
            addToEndOfList
     put

    %x y h w label paint
    %checkboxDict paint
    checkboxDict
} def
%---